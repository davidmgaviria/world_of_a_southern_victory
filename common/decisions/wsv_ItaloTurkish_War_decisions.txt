
ITA_libyan_ambitions_cat = {

	# Italian expedition timer
	ITA_claim_libya = {
		icon = generic_civil_support

		allowed = {
			tag = ITA
		}
		visible = {
			date > 1911.1.1
			NOT = { has_global_flag = italoturkish_war_over }
		}
		available = {
			has_war = no
		}

		cost = 25
		days_remove = 120
		fire_only_once = yes

		remove_effect = {
			set_country_flag = fabricated_libyan_claims
			custom_effect_tooltip = claim_libya_tt
			hidden_effect = {
				add_state_claim = 448
				add_state_claim = 449
				add_state_claim = 450
				add_state_claim = 451
				add_state_claim = 663
				add_state_claim = 662
				add_state_claim = 661
				add_state_claim = 273
			}
			TUR = { country_event = wsv_italy.1 }
		}

		ai_will_do = {
			factor = 1
		}
	}


	# Italian expedition timer
	ITA_prepare_invasion_force = {
		icon = generic_operation

		allowed = {
			tag = ITA
		}
		visible = {
			date > 1911.1.1
			NOT = { has_global_flag = italoturkish_war_over }
		}
		available = {
			has_war = no
			has_country_flag = fabricated_libyan_claims
		}

		cost = 25
		days_remove = 90
		fire_only_once = yes

		remove_effect = {
			set_country_flag = prepared_libyan_invasion
			# makes ai prepare invasion
		}

		ai_will_do = {
			factor = 1
		}
	}


	# Italian expedition timer
	ITA_invade_libya = {
		icon = generic_prepare_civil_war

		allowed = {
			tag = ITA
		}
		visible = {
			date > 1911.1.1
			NOT = { has_global_flag = italoturkish_war_over }
		}
		available = {
			has_war = no
			has_country_flag = prepared_libyan_invasion
		}

		cost = 25
		days_remove = 7
		fire_only_once = yes

		remove_effect = {
			news_event = wsv_italy.2
		}

		ai_will_do = {
			factor = 0
			modifier = {
				add = 10
				date > 1911.9.3  # historical date is 9/11/1911
			}
		}
	}

}



italoturkish_war_cat = {
	
	# Italian expedition timer
	italoturkish_expedition_deadline = {
		icon = generic_operation
		priority = 10

		allowed = {
			tag = ITA
		}
		activation = {
			has_war_with = TUR
			NOT = { has_global_flag = italoturkish_war_over }
		}
		available = {
			has_global_flag = italoturkish_war_over  # condition for event to cancel
		}

		days_mission_timeout = 540
		fire_only_once = yes

		timeout_effect = {
			add_war_support = -0.3
			add_stability = -0.2
			add_political_power = -100
			TUR = { country_event = wsv_italy.6 }
		}

		ai_will_do = {
			factor = 0
		}
	}


	# Italy throws in the towel
	italoturkish_supply_line = {
		icon = 

		allowed = {
			original_tag = ITA
		}
		# available = {	
		# }
		visible = {
			has_war_with = TUR
			NOT = { has_global_flag = italoturkish_war_over }
		}

		days_remove = 90
		fire_only_once = yes

		remove_effect = {
			
		}

		ai_will_do = {
			factor = 10
		}
	}


	# Turkey throws in the towel
	italoturkish_turkey_offers_peace = {
		icon = generic_form_nation

		allowed = {
			tag = TUR
		}
		available = {
			OR = {
				casualties_inflicted_by = {
				    opponent = ITA
				    thousands > 50
				}
				AND = {
					ITA = {
						controls_state = 448
						controls_state = 450
						controls_state = 451
					}
				}
			}
		}
		visible = {
			has_war_with = ITA
			NOT = { has_global_flag = italoturkish_war_over }
		}

		days_remove = 4

		remove_effect = {
			add_war_support = -0.2
			add_stability = -0.1
			add_political_power = -100
			ITA = { country_event = wsv_italy.4 }
		}

		
		ai_will_do = {
			factor = 0
			# keep holding on if we have ports
			modifier = {
				add = -1
				controls_state = 448 
			}
			modifier = {
				add = -1
				controls_state = 450 
			}
			modifier = {
				add = -1
				controls_state = 451 
			}
			# if completely pushed out of libya, give up
			modifier = {
				add = 1
				NOT = { controls_state =  449 }
				NOT = { controls_state =  661 }
				NOT = { controls_state =  662 }
				NOT = { controls_state =  663 }
			}
			# if we're holding out in the hinter lands but lost all ports and have lost this many men, give up
			modifier = {
				add = 1
				casualties > 50000
			}
			# if we still have 1 port but have lost all this men, give up
			modifier = {
				add = 1
				casualties > 100000
			}
		}
	}
}