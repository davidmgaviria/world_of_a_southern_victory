

##################################################
###########  NICARAGUA CRISIS DECISIONS ##########
##################################################

nicaragua_crisis_cat = {

	# nicaragua mission (on timeout CS fails)
	time_to_rescue_confederate_garrison = {

		priority = 100
		#icon = generic_nationalism

		allowed = {
			OR = {
				tag = CSA
				tag = USA
				tag = GER
				tag = ENG
			}
		}

		activation = {
			has_global_flag = nicaragua_crisis
			NOT = { has_global_flag = nicaragua_crisis_over }
		}

		available = {
			has_global_flag = nicaragua_crisis_over  #once it gets flag, auto completes
		}

		days_mission_timeout = 80

		fire_only_once = yes

		is_good = no

		timeout_effect = {
			if = {
				limit = { tag = CSA }
				add_political_power = -100
				add_war_support = -0.1
				add_stability = -0.05
				set_global_flag = nicaragua_crisis_over
				news_event = wsv_carib.9
			}
		}
	}


	# CSA sends peace terms to US
	csa_send_terms_to_us = {
		icon = execute_decisionicon

		visible = {
			has_active_mission = time_to_rescue_confederate_garrison
			tag = CSA
		}
		available = {
			tag = CSA
		}

		fire_only_once = yes
		days_remove = 5
		cost = 0

		remove_effect = {
			USA = {
				country_event = wsv_carib.4 
			}
		}

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0.5
				is_historical_focus_on = no
			}
			modifier = {
				factor = 0
				is_historical_focus_on = no
				strength_ratio = {
					tag = USA
					ratio > 0.75
				}
			}
		}
	}


	# CSA forces open blockade
	csa_force_open_blockade = {
		icon = generic_naval

		visible = {
			has_active_mission = time_to_rescue_confederate_garrison
			tag = CSA
		}
		available = {
			tag = CSA
		}

		fire_only_once = yes
		cost = 25

		complete_effect = {
			news_event = { id = wsv_carib.7  days = 2 }
			hidden_effect = {
				USA = { country_event = { id = wsv_carib.8  days = 3 } }  # us gets declaration of war
			}
			set_global_flag = nicaragua_crisis_over
			set_country_flag = CSA_stood_ground_for_nicaragua
			custom_effect_tooltip = will_lead_to_war_with_usa_tt
		}

		ai_will_do = {
			factor = 0
			modifier = {
				add = 2
				is_historical_focus_on = no
			}
			modifier = {
				add = 10
				has_global_flag = usa_rejected_nicaragua_terms
			}
		}
	}


	# Germany mobilizes for US
	germany_supports_usa_in_nicaragua = {
		icon = generic_prepare_civil_war

		visible = {
			has_active_mission = time_to_rescue_confederate_garrison
			tag = GER
		}
		available = {
			tag = GER
		}

		fire_only_once = yes
		cost = 10

		complete_effect = {
			add_war_support = 0.1
			USA = { country_event = wsv_carib.11 }
			CSA = { country_event = wsv_carib.11 }
		}

		ai_will_do = {
			factor = 0
			modifier = {
				add = 10
				has_global_flag = american_german_pact
			}
		}
	}
	

	# England mobilizes for CS
	britain_supports_csa_in_nicaragua = {
		icon = generic_prepare_civil_war

		visible = {
			has_active_mission = time_to_rescue_confederate_garrison
			tag = ENG
		}
		available = {
			tag = ENG
		}

		fire_only_once = yes
		cost = 10

		complete_effect = {
			add_war_support = 0.1
			USA = { country_event = wsv_carib.12 }
			CSA = { country_event = wsv_carib.12 }
		}

		ai_will_do = {
			factor = 0
			modifier = {
				add = 10
				CAN = { has_guaranteed = CSA }
			}
		}
	}

}
